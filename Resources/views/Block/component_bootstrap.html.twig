{%- use 'SonatraBootstrapBundle:Block:component_bootstrap.html.twig' with
        nav_item_widget as base_nav_item_widget,
        navbar_brand_widget as base_navbar_brand_widget,
        button_widget as base_button_widget,
        dropdown_widget as base_dropdown_widget,
        panel_widget as base_panel_widget,
        panel_body_widget as base_panel_body_widget,
        panel_footer_widget as base_panel_footer_widget,
        table_widget as base_table_widget,
        progress_bar_widget as base_progress_bar_widget -%}

{%- use 'SonatraGluonBundle:Block:block_bootstrap_extension.html.twig' -%}
{%- use 'SonatraGluonBundle:Block:block_bootstrap_fields.html.twig' -%}

{% block nav_item_widget -%}
    {%- if ripple is defined and ripple -%}
        {%- set attr = attr|merge({'class': (attr.class|default('') ~ ' btn-ripple')|trim}) -%}
    {%- endif -%}

    {{- block('base_nav_item_widget') -}}
{%- endblock nav_item_widget %}

{% block navbar_header_toggle_button -%}
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#{{ collapse_id }}">
        <span class="sr-only">{{ label|trans({}, translation_domain) }}</span>
        <i class="fa fa-navbar-toggle"></i>
    </button>
{%- endblock navbar_header_toggle_button %}


{% block navbar_brand_widget -%}
    {%- if switchable -%}
        {%- set attr = attr|merge({'class': (attr.class|default('')  ~ ' navbar-brand-switch')|trim}) -%}
    {%- endif -%}

    {{- block('base_navbar_brand_widget') -}}
    {%- require_style '@bower/sonatra-theme-gluon/less/bootstrap-theme/bootstrap-theme.less' -%}
{%- endblock navbar_brand_widget %}

{% block button_widget -%}
    {%- if raised is defined and raised -%}
        {%- set attr = attr|merge({'class': (attr.class|default('') ~ ' btn-raised')|trim}) -%}
    {%- endif -%}

    {%- if ripple is defined and ripple -%}
        {%- set attr = attr|merge({'class': (attr.class|default('') ~ ' btn-ripple')|trim}) -%}
    {%- endif -%}

    {{- block('base_button_widget') -}}
{%- endblock button_widget %}

{% block dropdown_widget -%}
    {%- require_style   '@bower/sonatra-bootstrap-dropdown-position/less/dropdown-position.less' -%}
    {%- require_script  '@bower/jquery/dist/jquery.js'
                        '@bower/sonatra-bootstrap-dropdown-position/js/dropdown-position.js' -%}
    {%- if ripple is defined and ripple -%}
        {%- set attr = attr|merge({'class': (attr.class|default('') ~ ' dropdown-ripple')|trim}) -%}
    {%- endif -%}

    {{- block('base_dropdown_widget') -}}
{%- endblock dropdown_widget %}


{% block checkbox_widget_content -%}
    {%- if value -%}
        {%- set value = 'checked' -%}
    {%- else -%}
        {%- set value = '' -%}
    {%- endif -%}

    {%- if style -%}
        {%- set attr = attr|merge({'class': (attr.class|default('') ~ ' block-' ~ style)|trim}) -%}
    {%- endif -%}
    {%- set attr = attr|merge({'class': ('fa block-control-fa-checkbox ' ~ value ~ ' ' ~ attr.class|default(''))|trim}) -%}

    <i{{ block('widget_attributes') }}></i>
{%- endblock checkbox_widget_content %}


{% block radio_widget_content -%}
    {%- if value -%}
        {%- set value = 'checked' -%}
    {%- else -%}
        {%- set value = '' -%}
    {%- endif -%}

    {%- if style -%}
        {%- set attr = attr|merge({'class': (attr.class|default('') ~ ' block-' ~ style)|trim}) -%}
    {%- endif -%}
    {%- set attr = attr|merge({'class': ('fa block-control-fa-radio ' ~ value ~ ' ' ~ attr.class|default(''))|trim}) -%}

    <i{{ block('widget_attributes') }}></i>
{%- endblock radio_widget_content %}


{% block panel_widget -%}
    {%- if not(hidden_if_empty) or (hidden_if_empty and block.children|length > 0) -%}
        {%- if border_top_style is not null -%}
            {%- set attr = attr|merge({'class': (attr.class|default('') ~ ' panel-' ~ border_top_style ~ '-top')|trim}) -%}
        {%- endif -%}

        {%- if collapsible -%}
            {%- require_style '@bower/sonatra-bootstrap-panel-collapse/less/panel-collapse.less' -%}
            {%- require_script '@bower/sonatra-bootstrap-panel-collapse/js/panel-collapse.js' -%}

            {%- set attr = attr|merge({'data-panel-collapse': 'true'}) -%}
        {%- endif -%}

        {%- if collapsed -%}
            {%- set attr = attr|merge({'class': (attr.class|default('') ~ ' panel-collapsed')|trim}) -%}
        {%- endif -%}

        {{- block('base_panel_widget') -}}

        {%- if panels_rendered -%}
            {%- for panel in related_panels -%}
                {{- block_widget(panel) -}}
            {%- endfor -%}
        {%- endif -%}
    {%- endif -%}

    {%- require_style '@bower/sonatra-theme-gluon/less/bootstrap-theme/bootstrap-theme.less' -%}
{%- endblock panel_widget %}


{% block panel_header_widget_content -%}
    {%- if panel_actions is defined -%}
        {{- block_widget(panel_actions) -}}
    {%- endif -%}

    {%- if panel_heading is defined -%}
        {{- block_widget(panel_heading) -}}
    {%- endif -%}

    {%- if panel_actions is defined -%}
        <div class="clearfix"></div>
    {%- endif -%}

    {{- value|raw -}}

    {%- for child in block -%}
        {{- block_widget(child) -}}
    {%- endfor -%}
{%- endblock panel_header_widget_content %}


{% block panel_body_widget -%}
    {%- if style is not null -%}
        {%- set attr = attr|merge({'class': (attr.class|default('') ~ ' panel-' ~ style)|trim}) -%}
    {%- endif -%}

    {{- block('base_panel_body_widget') -}}

    {%- require_style '@bower/sonatra-theme-gluon/less/bootstrap-theme/bootstrap-theme.less' -%}
{%- endblock panel_body_widget %}


{% block panel_footer_widget -%}
    {%- if style is not null -%}
        {%- set attr = attr|merge({'class': (attr.class|default('') ~ ' panel-' ~ style)|trim}) -%}
    {%- endif -%}

    {{- block('base_panel_footer_widget') -}}

    {%- require_style '@bower/sonatra-theme-gluon/less/bootstrap-theme/bootstrap-theme.less' -%}
{%- endblock panel_footer_widget %}


{% block table_widget -%}
    {%- if footable_options is defined -%}
        {%- set striped = false -%}
    {%- endif -%}

    {%- if pager is defined -%}
        {{- block_widget(pager) -}}
    {%- endif -%}

    {{- block('base_table_widget') -}}
    {%- require_style '@bower/sonatra-theme-gluon/less/bootstrap-theme/bootstrap-theme.less' -%}

    {%- if footable_options is defined -%}
        {%- require_style    '@bower/footable/css/footable.core.css'
                            '?@bower/sonatra-footable-striped/less/footable-striped.less' -%}
        {%- require_script   '@bower/jquery/dist/jquery.js'
                            '@bower/footable/js/footable.js'
                            '@bower/sonatra-theme-gluon/js/footable-destroy.js'
                            '?@bower/sonatra-footable-responsive/js/footable-responsive.js'
                            '?@bower/sonatra-footable-striped/js/footable-striped.js'
                            '?@bower/sonatra-bootstrap-nav-footable/js/nav-footable.js'
                            '?@bower/sonatra-jquery-table-pager-footable/js/table-pager-footable.js' -%}
        {%- inline_script -%}
        <script>
            $( '#{{ id }}' ).footable({{ footable_options|json_encode|raw }});
        </script>
        {%- endinline_script -%}

        {%- inline_script position='pjax_content' -%}
        <script>
            $(document).appPjax('addRegister', function () {
                $( '#{{ id }}' ).footable({{ footable_options|json_encode|raw }});
            });
            $(document).appPjax('addUnregister', function () {
                window.destroyFootable('#{{ id }}');
            });
        </script>
        {%- endinline_script -%}
    {%- endif -%}
{%- endblock table_widget %}


{% block progress_bar_widget -%}
    {%- require_style '@bower/sonatra-theme-gluon/less/bootstrap-theme/bootstrap-theme.less' -%}

    {%- if indeterminate -%}
        {%- set progress_class = progress_class|default('') ~ ' progress-indeterminate' -%}
    {%- endif -%}
    {%- if floating_label -%}
        {%- set progress_class = progress_class|default('') ~ ' progress-floating-label' -%}
    {%- endif -%}
    {%- if floating_label == 'hover' -%}
        {%- set progress_class = progress_class|default('') ~ ' on-hover' -%}
    {%- endif -%}
    {%- if large -%}
        {%- set progress_class = progress_class|default('') ~ ' progress-lg' -%}
    {%- endif -%}
    {{- block('base_progress_bar_widget') -}}
{%- endblock progress_bar_widget %}
